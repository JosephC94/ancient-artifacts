 21             order_form = OrderForm(request.POST)
 22             payment_form = MakePaymentForm(request.POST)
 23  
 24             import pdb; pdb.set_trace()
 25  
 26  ->         if order_form.is_valid() and payment_form.is_valid():
 27                 order = order_form.save(commit=False)
 28                 order.date = timezone.now()
 29                 order.save()
 30  
 31  
(Pdb) order_form.is_valid()
True
(Pdb) payment_form.is_valid()
False
(Pdb) payment_form
<MakePaymentForm bound=True, valid=False, fields=(credit_card_number;cvv;expiry_month;expiry_year;stripe_id)>
(Pdb) dir(payment_form)
['MONTH_CHOICES', 'YEAR_CHOICES', '__class__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__getitem__', '__gt__', '__hash__', '__html__', '__init__', '__init_subclass__', '__iter__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', '_bound_fields_cache', '_clean_fields', '_clean_form', '_errors', '_html_output', '_post_clean', 'add_error', 'add_initial_prefix', 'add_prefix', 'as_p', 'as_table', 'as_ul', 'auto_id', 'base_fields', 'changed_data', 'clean', 'cleaned_data', 'data', 'declared_fields', 'default_renderer', 'empty_permitted', 'error_class', 'errors', 'field_order', 'fields', 'files', 'full_clean', 'get_initial_for_field', 'has_changed', 'has_error', 'hidden_fields', 'initial', 'is_bound', 'is_multipart', 'is_valid', 'label_suffix', 'media', 'non_field_errors', 'order_fields', 'prefix', 'renderer', 'use_required_attribute', 'visible_fields']
(Pdb) payment_form._errors
{'stripe_id': ['This field is required.']}
(Pdb) payment_form.errors
{'stripe_id': ['This field is required.']}
(Pdb) payment_form.visible_fields
<bound method BaseForm.visible_fields of <MakePaymentForm bound=True, valid=False, fields=(credit_card_number;cvv;expiry_month;expiry_year;stripe_id)>>
(Pdb) payment_form.visible_fields.strip_id
*** AttributeError: 'function' object has no attribute 'strip_id'
(Pdb) payment_form.visible_fields.stripe_id
*** AttributeError: 'function' object has no attribute 'stripe_id'
(Pdb) payment_form.visible_fields.fields
*** AttributeError: 'function' object has no attribute 'fields'
(Pdb) dir(payment_form.visible_fields)
['__call__', '__class__', '__delattr__', '__dir__', '__doc__', '__eq__', '__format__', '__func__', '__ge__', '__get__', '__getattribute__', '__gt__', '__hash__', '__init__', '__init_subclass__', '__le__', '__lt__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__self__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__']
(Pdb) str(payment_form.visible_fields)                                                                                                  
'<bound method BaseForm.visible_fields of <MakePaymentForm bound=True, valid=False, fields=(credit_card_number;cvv;expiry_month;expiry_year;stripe_id)>>'
(Pdb) payment_form.data                                                                                                                 
<QueryDict: {'csrfmiddlewaretoken': ['9eGkiiWZqIRmrSGJqRprKkgSBFoS8YOL5oVZZq23VvUTx6Z4nXyJ7DqG7FD0OhgP'], 'full_name': ['Joseph comerford'], 'phone_number': ['7754493846'], 'country': ['United Kingdom'], 'postcode': ['RG40 1UW'], 'town_or_city': ['Wokingham'], 'street_address1': ['Hawkins Way'], 'street_address2': ['15'], 'county': ['Berkshire'], 'credit_card_number': ['4242424242424242'], 'cvv': ['123'], 'expiry_month': ['1'], 'expiry_year': ['2020'], 'stripe_id': [''], 'commit': ['Submit Payment']}>
(Pdb) 


[16/Aug/2019 16:16:46] "GET /checkout/ HTTP/1.1" 200 12982
<QueryDict: {'csrfmiddlewaretoken': ['f4JsACcUafycPCiwmIb9iubAeeROjD0bbeY7hKiYF2BJVQBRjOkrFNloKe6WZWsf'], 'full_name': ['Joseph comerford'], 'phone_number': ['7754493846'], 'country': ['United Kingdom'], 'postcode': ['RG40 1UW'], 'town_or_city': ['Wokingham'], 'street_address1': ['Hawkins Way'], 'street_address2': ['15'], 'county': ['Berkshire'], 'credit_card_number': ['4242424242424242'], 'cvv': ['123'], 'expiry_month': ['1'], 'expiry_year': ['2025'], 'stripe_id': [''], 'commit': ['Submit Payment']}>
<ul class="errorlist"><li>stripe_id<ul class="errorlist"><li>This field is required.</li></ul></li></ul>
<ul class="errorlist"><li>stripe_id<ul class="errorlist"><li>This field is required.</li></ul></li></ul>
[16/Aug/2019 16:17:07] "POST /checkout/ HTTP/1.1" 200 13268
